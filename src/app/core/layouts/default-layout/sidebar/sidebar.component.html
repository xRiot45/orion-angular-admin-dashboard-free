<!-- sidebar.component.html -->
<aside
  class="h-screen bg-black text-zinc-200 flex flex-col border-r border-zinc-800 p-2 transition-all duration-300 ease-in-out"
  [class.w-80]="!isCollapsed"
  [class.w-20]="isCollapsed"
>
  <!-- User Mini Card with Zard Dropdown -->
  <div class="px-4 py-3 border-b border-zinc-800">
    <div
      class="flex items-center gap-3 cursor-pointer group"
      z-dropdown
      [zDropdownMenu]="userMenu"
      [class.justify-center]="isCollapsed"
    >
      <img
        src="https://i.pravatar.cc/40?img=8"
        alt="User Avatar"
        class="w-10 rounded-full border-zinc-300 shadow-sm transition group-hover:ring-2 group-hover:ring-indigo-400"
      />

      @if (!isCollapsed) {
        <div class="flex flex-col">
          <span class="text-sm font-semibold text-zinc-200">Thomas Alberto</span>
          <span class="text-xs text-zinc-500">UI/UX Designer</span>
        </div>
      }
    </div>

    <!-- Dropdown Menu -->
    <z-dropdown-menu-content
      #userMenu="zDropdownMenuContent"
      class="w-72 rounded-lg shadow-lg bg-white scrollbar-none"
    >
      <!-- User Card -->
      <div class="flex flex-col items-center text-center p-5">
        <img
          src="https://i.pravatar.cc/80?img=8"
          class="w-16 h-16 rounded-full border border-zinc-300 shadow-sm mb-3"
          alt="User"
        />
        <span class="text-base font-semibold text-zinc-800">Thomas Alberto</span>
        <span class="text-xs text-zinc-500 mb-2">UI/UX Designer Â· Jakarta</span>
        <span class="text-[11px] px-3 py-1 rounded-full bg-indigo-50 text-gray-600 font-medium">
          Free Member
        </span>
      </div>

      <!-- Stats Row -->
      <div class="grid grid-cols-3 gap-3 px-4 pb-4">
        <div class="flex flex-col items-center">
          <span class="text-sm font-semibold text-zinc-800">12</span>
          <span class="text-[11px] text-zinc-500">Projects</span>
        </div>
        <div class="flex flex-col items-center">
          <span class="text-sm font-semibold text-zinc-800">7</span>
          <span class="text-[11px] text-zinc-500">Teams</span>
        </div>
        <div class="flex flex-col items-center">
          <span class="text-sm font-semibold text-zinc-800">3</span>
          <span class="text-[11px] text-zinc-500">Alerts</span>
        </div>
      </div>

      <z-divider zSpacing="sm" class="-mx-2"></z-divider>

      <!-- Quick Actions -->
      <div class="flex flex-col px-2 py-1">
        <z-dropdown-menu-item class="hover:bg-zinc-100 rounded-lg px-3 py-2">
          <iconify-icon icon="mdi:pencil-outline" class="mr-2 text-indigo-500"></iconify-icon>
          Edit Profile
        </z-dropdown-menu-item>

        <z-dropdown-menu-item class="hover:bg-zinc-100 rounded-lg px-3 py-2">
          <iconify-icon icon="mdi:bell-outline" class="mr-2 text-indigo-500"></iconify-icon>
          Notifications
          <span class="ml-auto text-xs px-2 py-0.5 rounded-full bg-red-100 text-red-600">3</span>
        </z-dropdown-menu-item>

        <z-dropdown-menu-item class="hover:bg-zinc-100 rounded-lg px-3 py-2">
          <iconify-icon icon="mdi:folder-outline" class="mr-2 text-indigo-500"></iconify-icon>
          My Projects
        </z-dropdown-menu-item>
      </div>

      <z-divider zSpacing="sm" class="-mx-2"></z-divider>

      <!-- Logout -->
      <z-dropdown-menu-item
        class="justify-center text-red-600 font-medium hover:bg-red-50 rounded-lg transition py-2"
        (zDropdownMenuItemSelect)="onLogout()"
      >
        Logout
      </z-dropdown-menu-item>
    </z-dropdown-menu-content>
  </div>

  <!-- Brand -->
  <div
    class="flex items-center justify-between px-4 py-3 border-b border-zinc-800"
    [class.justify-center]="isCollapsed"
  >
    <a href="#" class="flex items-center gap-2">
      <div class="bg-white/10 p-2 rounded-xl flex items-center justify-center shadow-md">
        <iconify-icon
          icon="devicon:angular"
          width="28"
          height="28"
          class="text-red-500"
        ></iconify-icon>
      </div>
      @if (!isCollapsed) {
        <span class="text-xl font-bold tracking-wide text-white flex items-center gap-2">
          Orion
          <span class="text-xs font-semibold text-green-400 bg-green-900/30 px-2 py-0.5 rounded">
            Free
          </span>
        </span>
      }
    </a>

    <!-- Collapse Button -->
    @if (!isCollapsed) {
      <button
        class="mt-2 w-8 h-8 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition"
        title="Collapsible Sidebar"
        (click)="toggleSidebar()"
      >
        <iconify-icon
          [icon]="isCollapsed ? 'mingcute:right-fill' : 'mingcute:left-fill'"
          width="20"
          height="20"
          class="text-gray-500"
        ></iconify-icon>
      </button>
    }
  </div>

  <!-- Search -->
  @if (!isCollapsed) {
    <div class="px-4 py-3 border-b border-zinc-800">
      <div class="relative">
        <iconify-icon
          icon="mdi:magnify"
          width="18"
          height="18"
          class="absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500"
        ></iconify-icon>
        <input
          type="text"
          placeholder="Search menu..."
          class="w-full bg-zinc-900 text-sm text-zinc-300 rounded-md pl-9 pr-3 py-4 outline-none focus:ring-1 focus:ring-red-500"
        />
      </div>
    </div>
  }

  <!-- Pages Section -->
  <div class="mt-4 flex-1 overflow-y-auto scrollbar-none">
    @if (!isCollapsed) {
      <div class="px-4 text-xs font-semibold text-zinc-500 mb-2">MAIN NAVIGATION</div>
    }

    <nav class="px-2 space-y-2 text-sm">
      <!-- Dashboard -->
      <div>
        <button
          class="w-full flex items-center gap-2 py-3 px-5 rounded-md bg-zinc-800 text-white font-medium tracking-wide text-md hover:bg-zinc-800 transition cursor-pointer"
          [class.justify-center]="isCollapsed"
        >
          <iconify-icon
            icon="material-symbols:dashboard-outline-rounded"
            width="20"
            height="20"
            class="text-zinc-300"
          ></iconify-icon>
          @if (!isCollapsed) {
            <span class="text-zinc-300 text-xs">Dashboard</span>
          }
        </button>
      </div>

      <!-- Profile -->
      <div>
        <button
          class="w-full flex items-center justify-between gap-2 py-3 px-5 rounded-md text-white font-medium tracking-wide text-md hover:bg-zinc-800 transition cursor-pointer"
          (click)="toggle('profile')"
          [class.justify-center]="isCollapsed"
        >
          <div class="flex items-center gap-2">
            <iconify-icon
              icon="iconamoon:profile-circle-duotone"
              width="20"
              height="20"
              class="text-zinc-300"
            ></iconify-icon>
            @if (!isCollapsed) {
              <span class="text-zinc-300 text-xs">Profile</span>
            }
          </div>
          @if (!isCollapsed) {
            <iconify-icon
              icon="mingcute:down-line"
              class="text-white transform transition-transform duration-300 ease-in-out"
              [class.rotate-180]="openMenu === 'profile'"
            ></iconify-icon>
          }
        </button>

        <!-- submenu -->
        <div
          class="ml-8 mt-1 overflow-hidden transition-all duration-500 ease-in-out"
          [class.max-h-0]="openMenu !== 'profile' || isCollapsed"
          [class.max-h-96]="openMenu === 'profile' && !isCollapsed"
        >
          <div class="space-y-1 py-1">
            <button
              class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium text-xs cursor-pointer"
            >
              Profiles
            </button>
            <button
              class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium text-xs cursor-pointer"
            >
              Projects
            </button>
            <button
              class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium text-xs cursor-pointer"
            >
              Works
            </button>
            <button
              class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium text-xs cursor-pointer"
            >
              Teams
            </button>
            <button
              class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium text-xs cursor-pointer"
            >
              Network
            </button>
          </div>
        </div>
      </div>

      <!-- My Account -->
      <div>
        <button
          class="w-full flex items-center justify-between gap-2 py-3 px-5 rounded-md text-white font-medium tracking-wide text-md hover:bg-zinc-800 transition cursor-pointer"
          (click)="toggle('account')"
          [class.justify-center]="isCollapsed"
        >
          <div class="flex items-center gap-2">
            <iconify-icon
              icon="mdi:account-outline"
              width="20"
              height="20"
              class="text-zinc-300"
            ></iconify-icon>
            @if (!isCollapsed) {
              <span class="text-zinc-300 text-xs">My Account</span>
            }
          </div>
          @if (!isCollapsed) {
            <iconify-icon
              icon="mingcute:down-line"
              class="text-white transform transition-transform duration-300 ease-in-out"
              [class.rotate-180]="openMenu === 'account'"
            ></iconify-icon>
          }
        </button>

        <!-- submenu -->
        <div
          class="ml-8 mt-1 overflow-hidden transition-all duration-300 ease-in-out"
          [class.max-h-0]="openMenu !== 'account' || isCollapsed"
          [class.max-h-40]="openMenu === 'account' && !isCollapsed"
        >
          <div class="space-y-1 py-1">
            <button
              class="w-full text-left text-xs cursor-pointer px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium"
            >
              General
            </button>
            <button
              class="w-full text-left text-xs cursor-pointer px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium"
            >
              Security
            </button>
            <button
              class="w-full text-left text-xs cursor-pointer px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium"
            >
              Notifications
            </button>
          </div>
        </div>
      </div>

      <!-- Authentication -->
      <div>
        <button
          class="w-full flex items-center justify-between gap-2 py-3 px-5 rounded-md text-white font-medium tracking-wide text-md hover:bg-zinc-800 transition cursor-pointer"
          (click)="toggle('authentication')"
          [class.justify-center]="isCollapsed"
        >
          <div class="flex items-center gap-2">
            <iconify-icon
              icon="material-symbols:security"
              width="20"
              height="20"
              class="text-zinc-300"
            ></iconify-icon>
            @if (!isCollapsed) {
              <span class="text-zinc-300 text-xs">Authentication</span>
            }
          </div>
          @if (!isCollapsed) {
            <iconify-icon
              icon="mingcute:down-line"
              class="text-white transform transition-transform duration-300 ease-in-out"
              [class.rotate-180]="openMenu === 'authentication'"
            ></iconify-icon>
          }
        </button>

        <!-- submenu -->
        <div
          class="ml-8 mt-1 overflow-hidden transition-all duration-300 ease-in-out"
          [class.max-h-0]="openMenu !== 'authentication' || isCollapsed"
          [class.max-h-40]="openMenu === 'authentication' && !isCollapsed"
        >
          <div class="space-y-1 py-1">
            <button
              class="w-full text-left text-xs cursor-pointer px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium"
            >
              Login
            </button>
            <button
              class="w-full text-left text-xs cursor-pointer px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium"
            >
              Register
            </button>
          </div>
        </div>
      </div>

      <!-- Utilities -->
      @if (!isCollapsed) {
        <div class="px-4 text-xs font-semibold text-zinc-500 mt-6 mb-2">UTILITIES</div>
      }

      <!-- About -->
      <div>
        <button
          class="w-full flex items-center gap-2 py-3 px-5 rounded-md hover:bg-zinc-800 transition cursor-pointer"
          [class.justify-center]="isCollapsed"
        >
          <iconify-icon
            icon="mdi:information-outline"
            width="20"
            height="20"
            class="text-zinc-300"
          ></iconify-icon>
          @if (!isCollapsed) {
            <span class="text-zinc-300 text-xs">About</span>
          }
        </button>
      </div>

      <!-- FAQ -->
      <div>
        <button
          class="w-full flex items-center gap-2 py-3 px-5 rounded-md hover:bg-zinc-800 transition cursor-pointer"
          [class.justify-center]="isCollapsed"
        >
          <iconify-icon
            icon="mdi:help-circle-outline"
            width="20"
            height="20"
            class="text-zinc-300"
          ></iconify-icon>
          @if (!isCollapsed) {
            <span class="text-zinc-300 text-xs">FAQ</span>
          }
        </button>
      </div>

      <!-- Tables -->
      <div>
        <button
          class="w-full flex items-center gap-2 py-3 px-5 rounded-md hover:bg-zinc-800 transition cursor-pointer"
          [class.justify-center]="isCollapsed"
        >
          <iconify-icon
            icon="mdi:table"
            width="20"
            height="20"
            class="text-zinc-300"
          ></iconify-icon>
          @if (!isCollapsed) {
            <span class="text-zinc-300 text-xs">Tables</span>
          }
        </button>
      </div>

      <!-- Forms -->
      <div>
        <button
          class="w-full flex items-center gap-2 py-3 px-5 rounded-md hover:bg-zinc-800 transition cursor-pointer"
          [class.justify-center]="isCollapsed"
        >
          <iconify-icon
            icon="mdi:form-select"
            width="20"
            height="20"
            class="text-zinc-300"
          ></iconify-icon>
          @if (!isCollapsed) {
            <span class="text-zinc-300 text-xs">Forms</span>
          }
        </button>
      </div>

      <!-- Charts -->
      <div>
        <button
          class="w-full flex items-center gap-2 py-3 px-5 rounded-md hover:bg-zinc-800 transition cursor-pointer"
          [class.justify-center]="isCollapsed"
        >
          <iconify-icon
            icon="mdi:chart-bar"
            width="20"
            height="20"
            class="text-zinc-300"
          ></iconify-icon>
          @if (!isCollapsed) {
            <span class="text-zinc-300 text-xs">Charts</span>
          }
        </button>
      </div>

      <!-- Branding -->
      @if (!isCollapsed) {
        <div class="px-4 text-xs font-semibold text-zinc-500 mt-6 mb-2">BRANDING</div>
      }

      <button
        class="w-full flex items-center gap-2 py-3 px-5 rounded-md bg-red-600 hover:bg-red-700 transition cursor-pointer"
        [class.justify-center]="isCollapsed"
      >
        <iconify-icon
          icon="mdi:rocket-launch-outline"
          width="20"
          height="20"
          class="text-white"
        ></iconify-icon>
        @if (!isCollapsed) {
          <span class="text-white">Upgrade to Premium</span>
        }
      </button>
      @if (!isCollapsed) {
        <div class="bg-white/5 text-xs text-zinc-400 rounded-md px-4 py-3 mt-3 leading-relaxed">
          ð¥ Get access to 20+ extra pages & advanced features with Orion Premium!
        </div>
      }
    </nav>
  </div>

  <!-- Footer -->
  <div class="px-4 py-3 border-t border-zinc-800 text-xs text-zinc-500 items-center">
    @if (!isCollapsed) {
      <div class="flex items-center justify-between">
        <span>Orion Free v1.0.0</span>
        <div class="flex items-center gap-3">
          <a href="#" class="hover:text-white">
            <iconify-icon icon="mdi:github" width="16" height="16"></iconify-icon>
          </a>
          <a href="#" class="hover:text-white">
            <iconify-icon icon="mdi:discord" width="16" height="16"></iconify-icon>
          </a>
          <a href="#" class="hover:text-white">
            <iconify-icon icon="mdi:web" width="16" height="16"></iconify-icon>
          </a>
        </div>
      </div>
    } @else {
      <div class="flex flex-col items-center gap-2">
        <a href="#" class="hover:text-white"
          ><iconify-icon icon="mdi:github" width="16" height="16"></iconify-icon
        ></a>
        <a href="#" class="hover:text-white"
          ><iconify-icon icon="mdi:discord" width="16" height="16"></iconify-icon
        ></a>
        <a href="#" class="hover:text-white"
          ><iconify-icon icon="mdi:web" width="16" height="16"></iconify-icon
        ></a>
      </div>
    }

    <!-- Tombol Collapsible tambahan di Footer -->
    @if (isCollapsed) {
      <button
        class="mt-2 w-8 h-8 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition"
        title="Expand Sidebar"
        (click)="toggleSidebar()"
      >
        <iconify-icon
          icon="mingcute:right-fill"
          width="20"
          height="20"
          class="text-gray-500"
        ></iconify-icon>
      </button>
    }

    @if (!isCollapsed) {
      <span class="mt-2 text-zinc-600">Made with â¤ï¸ by RumahKodingku</span>
    }
  </div>
</aside>
