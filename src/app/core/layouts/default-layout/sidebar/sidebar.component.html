<!-- sidebar.component.html -->
<aside
  class="h-screen bg-black text-zinc-200 flex flex-col border-r border-zinc-800 p-2 transition-all duration-300 ease-in-out"
  [class.w-96]="!isCollapsed"
  [class.w-20]="isCollapsed"
>
  <!-- User Mini Card with Zard Dropdown -->
  <div class="px-4 py-3 border-b border-zinc-800">
    <div
      class="flex items-center gap-3 cursor-pointer"
      z-dropdown
      [zDropdownMenu]="userMenu"
      [class.justify-center]="isCollapsed"
    >
      <img
        src="https://i.pravatar.cc/40?img=3"
        alt="User Avatar"
        class="w-10 rounded-full border border-zinc-700"
      />
      <div class="flex flex-col" *ngIf="!isCollapsed">
        <span class="text-sm font-medium text-white">Sean</span>
        <span class="text-xs text-zinc-400">{{ 'sean@gmail.com' }}</span>
      </div>
    </div>

    <!-- Dropdown Menu Content -->
    <z-dropdown-menu-content #userMenu="zDropdownMenuContent" class="w-80">
      <!-- User Info -->
      <div class="flex items-center gap-3 p-3">
        <img
          src="https://i.pravatar.cc/40?img=3"
          class="w-10 h-10 rounded-full border"
          alt="User"
        />
        <div class="flex flex-col">
          <span class="text-sm font-semibold">Sean</span>
          <span class="text-xs text-zinc-400">{{ 'sean@gmail.com' }}</span>
        </div>
        <span
          class="ml-auto text-[10px] px-2 py-0.5 rounded-full bg-indigo-100 text-indigo-600 font-medium"
        >
          Pro
        </span>
      </div>

      <z-divider zSpacing="sm" class="-mx-1"></z-divider>

      <!-- Action Items -->
      <z-dropdown-menu-item (zDropdownMenuItemSelect)="onProfile()">
        <iconify-icon icon="mdi:account-circle-outline" class="mr-2 text-zinc-500"></iconify-icon>
        Public Profile
      </z-dropdown-menu-item>

      <z-dropdown-menu-item (zDropdownMenuItemSelect)="onProfile()">
        <iconify-icon icon="mdi:account-outline" class="mr-2 text-zinc-500"></iconify-icon>
        My Profile
      </z-dropdown-menu-item>

      <z-dropdown-menu-item (zDropdownMenuItemSelect)="onSettings()">
        <iconify-icon icon="mdi:cog-outline" class="mr-2 text-zinc-500"></iconify-icon>
        My Account
      </z-dropdown-menu-item>

      <z-dropdown-menu-item>
        <iconify-icon icon="mdi:forum-outline" class="mr-2 text-zinc-500"></iconify-icon>
        Dev Forum
      </z-dropdown-menu-item>

      <!-- Non-closing Interactive Items -->
      <div
        class="flex items-center justify-between px-3 py-2 hover:bg-zinc-800 rounded-md transition"
      >
        <div class="flex items-center">
          <iconify-icon icon="mdi:web" class="mr-2 text-zinc-500"></iconify-icon>
          Language
        </div>
        <div class="flex items-center text-xs text-zinc-600 gap-1">
          English
          <img src="https://flagcdn.com/w20/us.png" class="w-4 h-4 rounded-sm" alt="Flag" />
        </div>
      </div>

      <div
        class="flex items-center justify-between px-3 py-2 hover:bg-zinc-800 rounded-md transition"
      >
        <div class="flex items-center">
          <iconify-icon icon="mdi:theme-light-dark" class="mr-2 text-zinc-500"></iconify-icon>
          Dark Mode
        </div>
        <label class="relative inline-flex items-center cursor-pointer">
          <input type="checkbox" class="sr-only peer" (click)="$event.stopPropagation()" />
          <div
            class="w-9 h-5 bg-zinc-300 peer-focus:outline-none rounded-full peer peer-checked:bg-indigo-500 transition"
          ></div>
          <div
            class="absolute left-0.5 top-0.5 w-4 h-4 bg-white rounded-full transition peer-checked:translate-x-4"
          ></div>
        </label>
      </div>

      <z-divider zSpacing="sm" class="-mx-1"></z-divider>

      <!-- Logout -->
      <z-dropdown-menu-item
        class="justify-center text-red-600 font-medium"
        (zDropdownMenuItemSelect)="onLogout()"
      >
        Logout
      </z-dropdown-menu-item>
    </z-dropdown-menu-content>
  </div>

  <!-- Brand -->
  <div
    class="flex items-center justify-between px-4 py-3 border-b border-zinc-800"
    [class.justify-center]="isCollapsed"
  >
    <a href="#" class="flex items-center gap-2">
      <div class="bg-white/10 p-2 rounded-xl flex items-center justify-center shadow-md">
        <iconify-icon
          icon="devicon:angular"
          width="28"
          height="28"
          class="text-red-500"
        ></iconify-icon>
      </div>
      <span class="text-xl font-bold tracking-wide text-white" *ngIf="!isCollapsed"> Orion </span>
    </a>

    <!-- Collapse Button -->
    <button
      class="border border-zinc-800 rounded-full p-1 hover:bg-white/10 transition"
      title="Collapsible Sidebar"
      (click)="toggleSidebar()"
      *ngIf="!isCollapsed"
    >
      <iconify-icon
        [icon]="isCollapsed ? 'mingcute:right-fill' : 'mingcute:left-fill'"
        width="20"
        height="20"
      ></iconify-icon>
    </button>
  </div>

  <!-- Search -->
  <div class="px-4 py-3 border-b border-zinc-800" *ngIf="!isCollapsed">
    <div class="relative">
      <iconify-icon
        icon="mdi:magnify"
        width="18"
        height="18"
        class="absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500"
      ></iconify-icon>
      <input
        type="text"
        placeholder="Search menu..."
        class="w-full bg-zinc-900 text-sm text-zinc-300 rounded-md pl-9 pr-3 py-4 outline-none focus:ring-1 focus:ring-red-500"
      />
    </div>
  </div>

  <!-- Pages Section -->
  <div class="mt-4 flex-1 overflow-y-auto">
    <div class="px-4 text-xs font-semibold text-zinc-500 mb-2" *ngIf="!isCollapsed">
      MAIN NAVIGATION
    </div>
    <nav class="px-2 space-y-3 text-sm">
      <!-- Dashboard -->
      <button
        class="w-full flex items-center gap-2 py-3 px-5 rounded-md bg-zinc-800 text-white font-medium tracking-wide text-md hover:bg-zinc-800 transition cursor-pointer"
        [class.justify-center]="isCollapsed"
      >
        <iconify-icon
          icon="material-symbols:dashboard-outline-rounded"
          width="24"
          height="24"
          class="text-zinc-300"
        ></iconify-icon>
        <span class="text-zinc-300" *ngIf="!isCollapsed">Dashboard</span>
      </button>

      <!-- Profile with Dropdown -->
      <div>
        <button
          class="w-full flex items-center justify-between gap-2 py-3 px-5 rounded-md text-white font-medium tracking-wide text-md hover:bg-zinc-800 transition cursor-pointer"
          (click)="toggle('profile')"
          [class.justify-center]="isCollapsed"
        >
          <div class="flex items-center gap-2">
            <iconify-icon
              icon="iconamoon:profile-circle-duotone"
              width="24"
              height="24"
              class="text-zinc-300"
            ></iconify-icon>
            <span class="text-zinc-300" *ngIf="!isCollapsed">Profile</span>
          </div>
          <iconify-icon
            icon="mingcute:down-line"
            class="text-white transform transition-transform duration-300 ease-in-out"
            *ngIf="!isCollapsed"
            [class.rotate-180]="openMenu === 'profile'"
          ></iconify-icon>
        </button>

        <!-- submenu -->
        <div
          class="ml-8 mt-1 overflow-hidden transition-all duration-500 ease-in-out"
          [class.max-h-0]="openMenu !== 'profile' || isCollapsed"
          [class.max-h-96]="openMenu === 'profile' && !isCollapsed"
        >
          <div class="space-y-1 py-1">
            <button
              class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium"
            >
              Profiles
            </button>
            <button
              class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium"
            >
              Projects
            </button>
            <button
              class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium"
            >
              Works
            </button>
            <button
              class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium"
            >
              Teams
            </button>
            <button
              class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium"
            >
              Network
            </button>
          </div>
        </div>
      </div>

      <!-- My Account -->
      <div>
        <button
          class="w-full flex items-center justify-between gap-2 py-3 px-5 rounded-md text-white font-medium tracking-wide text-md hover:bg-zinc-800 transition cursor-pointer"
          (click)="toggle('account')"
          [class.justify-center]="isCollapsed"
        >
          <div class="flex items-center gap-2">
            <iconify-icon
              icon="mdi:account-outline"
              width="24"
              height="24"
              class="text-zinc-300"
            ></iconify-icon>
            <span class="text-zinc-300" *ngIf="!isCollapsed">My Account</span>
          </div>
          <iconify-icon
            icon="mingcute:down-line"
            class="text-white transform transition-transform duration-300 ease-in-out"
            *ngIf="!isCollapsed"
            [class.rotate-180]="openMenu === 'account'"
          ></iconify-icon>
        </button>

        <!-- submenu -->
        <div
          class="ml-8 mt-1 overflow-hidden transition-all duration-300 ease-in-out"
          [class.max-h-0]="openMenu !== 'account' || isCollapsed"
          [class.max-h-40]="openMenu === 'account' && !isCollapsed"
        >
          <div class="space-y-1 py-1">
            <button
              class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium"
            >
              General
            </button>
            <button
              class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium"
            >
              Security
            </button>
            <button
              class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium"
            >
              Notifications
            </button>
          </div>
        </div>
      </div>

      <!-- Authentication -->
      <div>
        <button
          class="w-full flex items-center justify-between gap-2 py-3 px-5 rounded-md text-white font-medium tracking-wide text-md hover:bg-zinc-800 transition cursor-pointer"
          (click)="toggle('authentication')"
          [class.justify-center]="isCollapsed"
        >
          <div class="flex items-center gap-2">
            <iconify-icon
              icon="material-symbols:security"
              width="24"
              height="24"
              class="text-zinc-300"
            ></iconify-icon>
            <span class="text-zinc-300" *ngIf="!isCollapsed">Authentication</span>
          </div>
          <iconify-icon
            icon="mingcute:down-line"
            class="text-white transform transition-transform duration-300 ease-in-out"
            *ngIf="!isCollapsed"
            [class.rotate-180]="openMenu === 'authentication'"
          ></iconify-icon>
        </button>

        <!-- submenu -->
        <div
          class="ml-8 mt-1 overflow-hidden transition-all duration-300 ease-in-out"
          [class.max-h-0]="openMenu !== 'authentication' || isCollapsed"
          [class.max-h-40]="openMenu === 'authentication' && !isCollapsed"
        >
          <div class="space-y-1 py-1">
            <button
              class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium"
            >
              Login
            </button>
            <button
              class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium"
            >
              Register
            </button>
          </div>
        </div>
      </div>

      <!-- Utilities -->
      <div class="px-4 text-xs font-semibold text-zinc-500 mt-6 mb-2" *ngIf="!isCollapsed">
        UTILITIES
      </div>
      <button
        class="w-full flex items-center gap-2 py-3 px-5 rounded-md hover:bg-zinc-800 transition cursor-pointer"
        [class.justify-center]="isCollapsed"
      >
        <iconify-icon
          icon="mdi:information-outline"
          width="24"
          height="24"
          class="text-zinc-300"
        ></iconify-icon>
        <span class="text-zinc-300" *ngIf="!isCollapsed">About</span>
      </button>
      <button
        class="w-full flex items-center gap-2 py-3 px-5 rounded-md hover:bg-zinc-800 transition cursor-pointer"
        [class.justify-center]="isCollapsed"
      >
        <iconify-icon
          icon="mdi:help-circle-outline"
          width="24"
          height="24"
          class="text-zinc-300"
        ></iconify-icon>
        <span class="text-zinc-300" *ngIf="!isCollapsed">FAQ</span>
      </button>
      <button
        class="w-full flex items-center gap-2 py-3 px-5 rounded-md hover:bg-zinc-800 transition cursor-pointer"
        [class.justify-center]="isCollapsed"
      >
        <iconify-icon icon="mdi:table" width="24" height="24" class="text-zinc-300"></iconify-icon>
        <span class="text-zinc-300" *ngIf="!isCollapsed">Tables</span>
      </button>
      <button
        class="w-full flex items-center gap-2 py-3 px-5 rounded-md hover:bg-zinc-800 transition cursor-pointer"
        [class.justify-center]="isCollapsed"
      >
        <iconify-icon
          icon="mdi:form-select"
          width="24"
          height="24"
          class="text-zinc-300"
        ></iconify-icon>
        <span class="text-zinc-300" *ngIf="!isCollapsed">Forms</span>
      </button>
      <button
        class="w-full flex items-center gap-2 py-3 px-5 rounded-md hover:bg-zinc-800 transition cursor-pointer"
        [class.justify-center]="isCollapsed"
      >
        <iconify-icon
          icon="mdi:chart-bar"
          width="24"
          height="24"
          class="text-zinc-300"
        ></iconify-icon>
        <span class="text-zinc-300" *ngIf="!isCollapsed">Charts</span>
      </button>

      <!-- Branding -->
      <div class="px-4 text-xs font-semibold text-zinc-500 mt-6 mb-2" *ngIf="!isCollapsed">
        BRANDING
      </div>
      <button
        class="w-full flex items-center gap-2 py-3 px-5 rounded-md bg-red-600 hover:bg-red-700 transition cursor-pointer"
        [class.justify-center]="isCollapsed"
      >
        <iconify-icon
          icon="mdi:rocket-launch-outline"
          width="24"
          height="24"
          class="text-white"
        ></iconify-icon>
        <span class="text-white" *ngIf="!isCollapsed">Upgrade to Premium</span>
      </button>
      <div
        class="bg-white/5 text-xs text-zinc-400 rounded-md px-4 py-3 mt-3 leading-relaxed"
        *ngIf="!isCollapsed"
      >
        🔥 Get access to 20+ extra pages & advanced features with Orion Premium!
      </div>
    </nav>
  </div>

  <!-- Footer -->
  <div class="px-4 py-3 border-t border-zinc-800 text-xs text-zinc-500 items-center">
    <div class="flex items-center justify-between" *ngIf="!isCollapsed; else collapsedFooter">
      <span>Orion Free v1.0.0</span>
      <div class="flex items-center gap-3">
        <a href="#" class="hover:text-white"
          ><iconify-icon icon="mdi:github" width="16" height="16"></iconify-icon
        ></a>
        <a href="#" class="hover:text-white"
          ><iconify-icon icon="mdi:discord" width="16" height="16"></iconify-icon
        ></a>
        <a href="#" class="hover:text-white"
          ><iconify-icon icon="mdi:web" width="16" height="16"></iconify-icon
        ></a>
      </div>
    </div>

    <ng-template #collapsedFooter>
      <div class="flex flex-col items-center gap-2">
        <a href="#" class="hover:text-white"
          ><iconify-icon icon="mdi:github" width="16" height="16"></iconify-icon
        ></a>
        <a href="#" class="hover:text-white"
          ><iconify-icon icon="mdi:discord" width="16" height="16"></iconify-icon
        ></a>
        <a href="#" class="hover:text-white"
          ><iconify-icon icon="mdi:web" width="16" height="16"></iconify-icon
        ></a>
      </div>
    </ng-template>

    <!-- Tombol Collapsible tambahan di Footer -->
    <button
      class="mt-2 w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition"
      title="Expand Sidebar"
      *ngIf="isCollapsed"
      (click)="toggleSidebar()"
    >
      <iconify-icon icon="mingcute:right-fill" width="20" height="20"></iconify-icon>
    </button>

    <div class="mt-2 text-zinc-600" *ngIf="!isCollapsed">Made with ❤️ by RumahKodingku</div>
  </div>
</aside>
