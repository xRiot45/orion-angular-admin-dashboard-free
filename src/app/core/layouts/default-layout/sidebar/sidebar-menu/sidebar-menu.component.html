<!-- Sidebar Menu Section -->
<div class="py-4 flex-1 space-y-2 overflow-y-auto scrollbar-none">
  @for (group of navGroups; track $index) {
    <!-- Group Title (only visible when sidebar is expanded) -->
    @if (group.groupTitle && !isCollapsed) {
      <span class="px-4 text-xs font-semibold text-zinc-500 mb-2">
        {{ group.groupTitle }}
      </span>
    }

    <!-- Navigation Items -->
    <nav class="px-2 space-y-1 text-sm">
      @for (item of group.items; track $index) {
        <div>
          <!-- Main Menu Button -->
          <a routerLink="{{ item.route }}">
            <button
              class="w-full flex items-center justify-between gap-2 py-3 px-5 rounded-md text-white font-medium tracking-wide text-md hover:bg-zinc-800 transition cursor-pointer"
              (click)="item.children ? toggle(item.title) : null"
              [class.justify-center]="isCollapsed"
            >
              <!-- Icon + Title -->
              <div class="flex items-center gap-2">
                @if (item.icon) {
                  <!-- Menu Icon -->
                  <iconify-icon
                    [icon]="item.icon"
                    width="20"
                    height="20"
                    class="text-zinc-300"
                  ></iconify-icon>
                }

                @if (!isCollapsed) {
                  <!-- Menu Title -->
                  <span class="text-zinc-300 text-xs">{{ item.title }}</span>
                }
              </div>

              <!-- Dropdown Arrow (visible only when item has children & sidebar expanded) -->
              @if (item.children && !isCollapsed) {
                <iconify-icon
                  icon="mingcute:down-line"
                  class="text-white transform transition-transform duration-300 ease-in-out"
                  [class.rotate-180]="openMenu === item.title"
                ></iconify-icon>
              }
            </button>
          </a>

          <!-- Children (collapsible) -->
          @if (item.children) {
            <div
              class="ml-8 mt-1 overflow-hidden transition-all duration-300 ease-in-out"
              [class.max-h-0]="openMenu !== item.title || isCollapsed"
              [class.max-h-screen]="openMenu === item.title && !isCollapsed"
            >
              <div class="space-y-1 py-1">
                <!-- Children Items -->
                @for (child of item.children; track $index) {
                  <a routerLink="{{ child.route }}">
                    <button
                      class="w-full text-left px-5 py-3 text-md tracking-wide text-zinc-400 hover:text-white font-medium text-xs cursor-pointer"
                    >
                      {{ child.title }}
                    </button>
                  </a>
                }
              </div>
            </div>
          }
        </div>
      }
    </nav>
  }
</div>
